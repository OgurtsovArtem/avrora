!function(e){"use strict";function c(t,n){var e=this,i=this,s=!1;if(Array.isArray(t))return!!t.length&&t.map(function(e){return new c(e,n)});var o={init:function(){this.options=Object.assign({duration:600,ariaEnabled:!0,collapse:!0,showMultiple:!1,openOnInit:[],elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",beforeOpen:function(){},onOpen:function(){},beforeClose:function(){},onClose:function(){}},n);var e="string"==typeof t;this.container=e?document.querySelector(t):t,this.createDefinitions(),i.attachEvents()},createDefinitions:function(){var n=this,e=this.options,t=e.elementClass,i=e.openOnInit;this.elements=[...this.container.querySelectorAll("."+t)],this.firstElement=this.elements[0],this.lastElement=this.elements[this.elements.length-1],this.elements.filter(function(e){return!e.classList.contains("js-enabled")}).map(function(e,t){return e.classList.add("js-enabled"),n.generateIDs(e),n.setARIA(e),n.setTransition(e),l++,i.includes(t)?n.showElement(e,!1):n.closeElement(e,!1)})},setTransition:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.options,i=n.duration,n=n.panelClass,e=e.querySelector(".".concat(n)),n=r("transitionDuration");e.style[n]=t?null:"".concat(i,"ms")},generateIDs:function(e){var t=this.options,n=t.triggerClass,t=t.panelClass,n=e.querySelector(".".concat(n)),t=e.querySelector(".".concat(t));e.setAttribute("id","ac-".concat(l)),n.setAttribute("id","ac-trigger-".concat(l)),t.setAttribute("id","ac-panel-".concat(l))},removeIDs:function(e){var t=this.options,n=t.triggerClass,t=t.panelClass,n=e.querySelector(".".concat(n)),t=e.querySelector(".".concat(t));e.removeAttribute("id"),n.removeAttribute("id"),t.removeAttribute("id")},setARIA:function(e){var t=this.options,n=t.ariaEnabled,i=t.triggerClass,t=t.panelClass;n&&(n=e.querySelector(".".concat(i)),i=e.querySelector(".".concat(t)),n.setAttribute("role","button"),n.setAttribute("aria-controls","ac-panel-".concat(l)),n.setAttribute("aria-disabled",!1),n.setAttribute("aria-expanded",!1),i.setAttribute("role","region"),i.setAttribute("aria-labelledby","ac-trigger-".concat(l)))},updateARIA:function(e,t){var n=t.ariaExpanded,t=t.ariaDisabled,i=this.options,s=i.ariaEnabled,i=i.triggerClass;s&&((s=e.querySelector(".".concat(i))).setAttribute("aria-expanded",n),s.setAttribute("aria-disabled",t))},removeARIA:function(e){var t=this.options,n=t.ariaEnabled,i=t.triggerClass,t=t.panelClass;n&&(n=e.querySelector(".".concat(i)),i=e.querySelector(".".concat(t)),n.removeAttribute("role"),n.removeAttribute("aria-controls"),n.removeAttribute("aria-disabled"),n.removeAttribute("aria-expanded"),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"))},focus:function(e,t){e.preventDefault();e=this.options.triggerClass;t.querySelector(".".concat(e)).focus()},focusFirstElement:function(e){this.focus(e,this.firstElement),this.currFocusedIdx=0},focusLastElement:function(e){this.focus(e,this.lastElement),this.currFocusedIdx=this.elements.length-1},focusNextElement:function(e){var t=this.currFocusedIdx+1;if(t>this.elements.length-1)return this.focusFirstElement(e);this.focus(e,this.elements[t]),this.currFocusedIdx=t},focusPrevElement:function(e){var t=this.currFocusedIdx-1;if(t<0)return this.focusLastElement(e);this.focus(e,this.elements[t]),this.currFocusedIdx=t},showElement:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.options,i=n.panelClass,s=n.activeClass,o=n.collapse,n=n.beforeOpen,r=e.querySelector(".".concat(i)),a=r.scrollHeight;e.classList.add(s),t&&n(e),requestAnimationFrame(function(){requestAnimationFrame(function(){r.style.height=t?"".concat(a,"px"):"auto"})}),this.updateARIA(e,{ariaExpanded:!0,ariaDisabled:!o})},closeElement:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.options,i=n.panelClass,s=n.activeClass,n=n.beforeClose,o=e.querySelector(".".concat(i)),r=o.scrollHeight;e.classList.remove(s),t?(n(e),requestAnimationFrame(function(){o.style.height="".concat(r,"px"),requestAnimationFrame(function(){o.style.height=0})}),this.updateARIA(e,{ariaExpanded:!1,ariaDisabled:!1})):o.style.height=0},toggleElement:function(e){var t=this.options,n=t.activeClass,t=t.collapse,n=e.classList.contains(n);if(!n||t)return n?this.closeElement(e):this.showElement(e)},closeElements:function(){var n=this,e=this.options,i=e.activeClass;e.showMultiple||(console.log(this),this.elements.map(function(e,t){e.classList.contains(i)&&t!=n.currFocusedIdx&&n.closeElement(e)}))},handleClick:function(n){var i=this,s=n.currentTarget;this.elements.map(function(e,t){e.contains(s)&&"A"!==n.target.nodeName&&(i.currFocusedIdx=t,i.closeElements(),i.focus(n,e),i.toggleElement(e))})},handleKeydown:function(e){var t=38,n=40,i=36,s=35;switch(e.keyCode){case t:return this.focusPrevElement(e);case n:return this.focusNextElement(e);case i:return this.focusFirstElement(e);case s:return this.focusLastElement(e);default:return null}},handleTransitionEnd:function(e){var t,n,i,s;"height"===e.propertyName&&(t=(n=this.options).onOpen,n=n.onClose,i=e.currentTarget,e=parseInt(i.style.height),s=this.elements.find(function(e){return e.contains(i)}),0<e?(i.style.height="auto",t(s)):n(s))}},r=(this.attachEvents=function(){var e,n,i;s||(e=o.options,n=e.triggerClass,i=e.panelClass,o.handleClick=o.handleClick.bind(o),o.handleKeydown=o.handleKeydown.bind(o),o.handleTransitionEnd=o.handleTransitionEnd.bind(o),o.elements.map(function(e){var t=e.querySelector(".".concat(n)),e=e.querySelector(".".concat(i));t.addEventListener("click",o.handleClick),t.addEventListener("keydown",o.handleKeydown),e.addEventListener("webkitTransitionEnd",o.handleTransitionEnd),e.addEventListener("transitionend",o.handleTransitionEnd)}),s=!0)},this.detachEvents=function(){var e,n,i;s&&(e=o.options,n=e.triggerClass,i=e.panelClass,o.elements.map(function(e){var t=e.querySelector(".".concat(n)),e=e.querySelector(".".concat(i));t.removeEventListener("click",o.handleClick),t.removeEventListener("keydown",o.handleKeydown),e.removeEventListener("webkitTransitionEnd",o.handleTransitionEnd),e.removeEventListener("transitionend",o.handleTransitionEnd)}),s=!1)},this.toggle=function(n){var e=o.elements.find(function(e,t){return t===n});e&&o.toggleElement(e)},this.open=function(n){var e=o.elements.find(function(e,t){return t===n});e&&o.showElement(e)},this.openAll=function(){o.elements.map(function(e){return o.showElement(e,!1)})},this.close=function(n){var e=o.elements.find(function(e,t){return t===n});e&&o.closeElement(e)},this.closeAll=function(){o.elements.map(function(e){return o.closeElement(e,!1)})},this.destroy=function(){e.detachEvents(),e.openAll(),o.elements.map(function(e){o.removeIDs(e),o.removeARIA(e),o.setTransition(e,!0)}),s=!0},this.update=function(){o.createDefinitions(),e.detachEvents(),e.attachEvents()},function(e){return"string"==typeof document.documentElement.style[e]?e:(e=a(e),"webkit".concat(e))}),a=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};o.init()}var l=0;"undefined"!=typeof module&&void 0!==module.exports?module.exports=c:e.Accordion=c}(window);